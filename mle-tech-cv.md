# Mini Streamio

Mini Streamio — это BentoML приложение, которое предоставляет API для детекции на изображении.



**Стэк**

* [BentoML](https://www.bentoml.com/)
* [Ultralytics](https://www.ultralytics.com/ru)
* [Compose](https://docs.docker.com/reference/cli/docker/compose/)
* [mlflow](https://mlflow.org/)


## Задача 1

1. Реализовать дообучение YOLO модели на кастомном датасете ([например этот](https://huggingface.co/datasets/keremberke/valorant-object-detection));
2. Предоставить jupyter notebook с анализом датасета, результатов дообучения (метрики, loss'ы)
3. Артефакты дообучения (метрики, loss) должны быть видны в mlflow;

## Задача 2

1. Сделать cli приложение для дообучения модели
2. Реализовать хранение датасета и модели в minio;

### Требования

* Должна быть возможность указать модель и датасет для дообучения (например из minio);
* Артефакты дообучения (метрики, loss) должны быть видны в mlflow;

**Пример команды**

```bash
python train.py --dataset=minio_address --model=yolov8l
```


## Задача 3

1. Реализовать сервис с использованием BentoML и Minio для инференса

**Функции**

Ответ должен содержать:

* bounding boxes.
* classes.

**Архитектура**

Необходимо _разделить io-нагрузку и inference_.

Соответственно обработка должна быть _асинхронной_.
Т.е. система должна добавить _запрос на обработку в очередь_ и не блокировать основной поток выполнения.

**Контракт**

| Метод | Эндпоинт          | Описание                                                                                 |
| ----- | ----------------- | ---------------------------------------------------------------------------------------- |
| POST  | /image/detect | Возвращает id задачи. |
| GET   | /image/detect | Получить результат обработки по id задачи.                                               |


Примерные структуры ответа:

```json
GET RESPONSE {
    "response": {
        "instances": [
            {
                "boundingBox": "0.34 0.28 0.36 0.89",
                "class": "0"
            },
            {
                "boundingBox": "0.23 0.76 0.12 0.33",
                "class": "1"
            },
        ],
    }
}
```

**Примечание: BentoML уже реализует асинхронность и task queue, [пример](https://docs.bentoml.org/en/latest/guides/tasks.html) **


### Требования

* Сервис должен иметь несколько слабосвязных слоёв логики;
* Необходимо использовать Pydantic для формирования DTO и конфигурации приложения;
* Работу с БД организовать с использованием библиотеки `minio`;


### Ожидаемый результат

Репозиторий должен содержать:

* Исходный код;
* Dockerfile для сервиса;
* Docker-compose для работы сервиса и Minio;
* TestClient для проверки результатов работы алгоритма;
* README.md с описанием эксплуатации сервиса;
* README.md с описанием решения задачи и указанием причин выбора реализованного подхода.


## Примечания

* Если задание выполнено частично, оно также будет рассмотрено.